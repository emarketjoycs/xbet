# Netlify Configuration for DxBet
# Este arquivo instrui o Netlify a tratar o subdiretório 'client' como a raiz do projeto.

[build]
# CRITICAL FIX: Set the base directory to 'client/' where package.json is located
base = "client/"

# Command to build the site
# Garantimos que as dependências sejam instaladas antes do build
command = "pnpm install && pnpm run build"

# Directory to publish (relativo ao 'base' directory, que é 'client/')
# Assumindo que o build do Vite/React gera a pasta 'dist'
publish = "dist"

# Node version
node_version = "18"

# Environment variables
[build.environment]
PNPM_VERSION = "9"

# Redirect rules for SPA (Single Page Application)
[[redirects]]
from = "/*"
to = "/index.html"
status = 200

# Cache headers
[[headers]]
for = "/assets/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/index.html"
[headers.values]
Cache-Control = "public, max-age=0, must-revalidate"

# Security headers
[[headers]]
for = "/*"
[headers.values]
X-Content-Type-Options = "nosniff"
X-Frame-Options = "DENY"
X-XSS-Protection = "1; mode=block"
Referrer-Policy = "strict-origin-when-cross-origin"
